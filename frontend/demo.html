<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>OrderSense â€” Live Demo</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#070A12;color:#EAF0FF}
    .wrap{max-width:1100px;margin:0 auto;padding:18px}
    .bar{display:flex;gap:10px;align-items:center;justify-content:space-between}
    a,button{color:#EAF0FF}
    button{padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);cursor:pointer}
    button:hover{background:rgba(255,255,255,.1)}
    .card{margin-top:14px;padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.06)}
    pre{white-space:pre-wrap;font-family:ui-monospace,Menlo,Monaco,Consolas,monospace;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bar">
      <div><b>OrderSense</b> <span style="opacity:.7">Live demo</span></div>
      <div style="display:flex;gap:10px">
        <a href="/" style="text-decoration:none;opacity:.8">Back</a>
        <button onclick="startBot()">Start</button>
        <button onclick="stopBot()">Stop</button>
      </div>
    </div>

    <div class="card">
      <div id="status"></div>
      <pre id="events">{}</pre>
    </div>
  </div>

<script>
const BACKEND = location.origin;

async function j(path, opts){
  const r = await fetch(BACKEND + path, opts);
  return r.json();
}
async function refresh(){
  const s = await j("/api/status");
  document.getElementById("status").textContent =
    `running=${s.running}  dry_run=${s.dry_run}  symbol=${s.symbol}`;
  const ev = await j("/api/events");
  document.getElementById("events").textContent = JSON.stringify(ev, null, 2);
}
async function startBot(){ await j("/api/start", {method:"POST"}); await refresh(); }
async function stopBot(){ await j("/api/stop", {method:"POST"}); await refresh(); }

window.startBot = startBot; window.stopBot = stopBot;
refresh(); setInterval(refresh, 1200);
</script>
</body>
</html>
